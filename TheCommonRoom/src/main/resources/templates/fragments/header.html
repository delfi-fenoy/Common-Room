<!--
  Fragmento header reutilizable para la barra superior de la aplicación.

  Incluye:
  - Logo que linkea a la página de inicio (/home)
  - Barra de búsqueda (input sin funcionalidad aún)
  - Botones de usuario que cambian según si hay usuario logueado o no:
    * Si no hay usuario logueado muestra opciones "Sign in" y "Register"
    * Si hay usuario logueado muestra foto, nombre y botón para cerrar sesión

  Para incluirlo en otras plantillas utilizar:
  <div th:insert="fragments/header :: header"></div>
-->

<header class="top-header" th:fragment="header">
  <div class="logo-container">
    <a th:href="@{/home}" class="logo-link" title="Inicio">
      <img th:src="@{/img/iconLetter.png}" alt="Logo de la aplicación" class="logo-img" />
    </a>
  </div>

  <form th:action="@{/search}" method="get" class="search-container">
    <input type="text" name="query" class="search-bar" placeholder="Buscar..." required/>
    <button type="submit" class="search-button" title="Buscar">🔍</button>
  </form>


  <div class="user-buttons" th:if="${usuarioLogueado == null}">
    <a th:href="@{/signin}" class="user-section" title="Iniciar sesión">
      <span class="sign-in-text">Sign in</span>
    </a>

    <a th:href="@{/signin(register=true)}" class="user-section" title="Registrarse">
      <span class="sign-in-text">Register</span>
    </a>
  </div>

  <div class="user-buttons" th:if="${usuarioLogueado != null}">
    <a th:href="@{/profile}" class="user-section user-profile" title="Perfil de usuario">
      <img th:if="${usuarioLogueado.profilePictureUrl != null}"
           th:src="@{${usuarioLogueado.profilePictureUrl}}"
           th:alt="'Foto de ' + ${usuarioLogueado.nombre}"
           class="user-photo" />
      <span th:text="${usuarioLogueado.nombre}"></span>
    </a>

    <form th:action="@{/logout}" method="post" class="logout-form">
      <button type="submit" class="user-section" title="Cerrar sesión">
        <span class="sign-in-text">Logout</span>
      </button>
    </form>
  </div>

</header>
